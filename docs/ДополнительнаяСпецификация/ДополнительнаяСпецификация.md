# Дополнительная спецификация

## 1. Введение

Данный документ содержит спецификацию нефункциональных требований к системе "Музыкальный салон", а также функциональные требования, общие для нескольких вариантов использования. Эта спецификация дополняет основные функциональные требования, определенные в соответствующем разделе.

## 2. Нефункциональные требования

### 2.1. Требования к надежности

#### 2.1.1. Целостность данных
- Система должна обеспечивать целостность данных с помощью механизмов внешних ключей и ограничений SQLite.
- Система должна предотвращать нарушение бизнес-правил с использованием SQL-триггеров (например, `check_sale_quantity` для проверки наличия достаточного количества компакт-дисков при продаже).
- Должна выполняться проверка всех введенных пользователем данных перед их обработкой.

#### 2.1.2. Обработка ошибок
- Система должна обеспечивать обработку всех возможных исключительных ситуаций.
- При возникновении ошибок пользователю должны выводиться понятные сообщения.
- В случае критических ошибок при работе с базой данных должно быть обеспечено корректное завершение программы с выводом диагностической информации.

#### 2.1.3. Сохранность данных
- Система должна использовать транзакции при выполнении операций, требующих атомарности (например, удаление компакт-диска и всех связанных с ним данных).
- База данных должна оставаться в согласованном состоянии даже при аварийном завершении работы программы.

### 2.2. Требования к удобству использования

#### 2.2.1. Интерфейс пользователя
- Консольный интерфейс должен быть интуитивно понятным и логично организованным.
- Меню должно отображать только те функции, которые доступны текущему пользователю согласно его роли.
- Табличные данные должны быть отформатированы для удобного восприятия (выравнивание столбцов, заголовки таблиц, разделительные линии).

#### 2.2.2. Сообщения и инструкции
- Все сообщения системы должны быть на русском языке.
- Сообщения об ошибках должны объяснять причину ошибки и содержать рекомендации по её устранению.
- При запросе ввода данных должны предоставляться подсказки о формате ввода (например, дата в формате YYYY-MM-DD).

#### 2.2.3. Обратная связь
- Система должна подтверждать успешное выполнение операций соответствующими сообщениями.
- При длительных операциях должна отображаться информация о ходе выполнения.
- При вводе некорректных данных система должна объяснять, какие именно данные не соответствуют требованиям.

### 2.3. Требования к производительности

#### 2.3.1. Время отклика
- Базовые операции (аутентификация, навигация по меню) должны выполняться менее чем за 1 секунду.
- Сложные запросы к базе данных (формирование отчетов) должны выполняться менее чем за 5 секунд при типовом объеме данных (до 10,000 записей).

#### 2.3.2. Емкость и масштабируемость
- Система должна поддерживать не менее 10,000 компакт-дисков в базе данных.
- Система должна поддерживать не менее 100,000 записей об операциях (поступление/продажа).
- Производительность не должна значительно снижаться при увеличении объема данных.

#### 2.3.3. Использование ресурсов
- Приложение должно потреблять не более 50 МБ оперативной памяти при типовой нагрузке.
- База данных должна занимать на диске не более 100 МБ при максимальном расчетном объеме данных.
- Система должна эффективно использовать индексы базы данных для оптимизации запросов.

### 2.4. Требования к сопровождаемости

#### 2.4.1. Структура кода
- Код должен иметь модульную структуру с четким разделением ответственности между классами.
- Должны использоваться понятные именования классов, методов и переменных, отражающие их назначение.
- Код должен содержать комментарии для сложных алгоритмов и неочевидных решений.

#### 2.4.2. Документация
- Все публичные методы классов должны иметь документацию в стиле Doxygen.
- Должна быть предоставлена документация по структуре базы данных.
- Должны быть документированы все внешние зависимости и требования к окружению.

#### 2.4.3. Расширяемость
- Архитектура системы должна позволять добавление новых функций без значительных изменений существующего кода.
- Должна быть предусмотрена возможность расширения типов отчетов.
- Код должен быть организован так, чтобы изменения в одной части системы минимально влияли на другие части.

### 2.5. Требования к безопасности

#### 2.5.1. Аутентификация и авторизация
- Доступ к функциям системы должен предоставляться только после успешной аутентификации.
- Пароли должны храниться в защищенной форме (в текущей реализации - в открытом виде, что требует улучшения).
- Функциональность системы должна быть разграничена в соответствии с ролями пользователей.

#### 2.5.2. Защита данных
- База данных должна быть защищена от несанкционированного доступа.
- Должна быть обеспечена защита от SQL-инъекций при выполнении запросов с параметрами.
- Система должна предотвращать возможность несанкционированного изменения данных через пользовательский интерфейс.

#### 2.5.3. Аудит действий
- Критически важные операции (добавление/удаление компакт-дисков, регистрация операций) должны фиксироваться с информацией о пользователе и времени выполнения.
- Должна быть предусмотрена возможность просмотра журнала действий администратором.

## 3. Общие функциональные требования

### 3.1. Локализация
- Все интерфейсы пользователя должны быть на русском языке.
- Все сообщения и инструкции должны быть на русском языке.
- Даты должны отображаться и вводиться в формате YYYY-MM-DD.
- Денежные суммы должны отображаться с указанием валюты.

### 3.2. Управление сеансом работы
- Пользователь должен иметь возможность выйти из системы в любой момент.
- При бездействии пользователя в течение определенного времени сеанс должен автоматически завершаться.
- При завершении сеанса должно выполняться корректное закрытие соединения с базой данных.

### 3.3. Обработка данных
- Система должна обеспечивать валидацию вводимых данных по типам и форматам.
- Система должна проверять даты на корректность (включая високосные годы).
- Система должна проверять целостность данных при удалении записей (например, нельзя удалить компакт-диск, если есть зарегистрированные операции продаж).

### 3.4. Совместимость
- Приложение должно корректно работать на распространенных операционных системах (Windows, Linux, macOS).
- База данных должна быть совместима с SQLite версии 3 и выше.
- Система должна поддерживать работу с различными кодировками для корректного отображения символов национальных алфавитов.

### 3.5. Отчетность и статистика
- Система должна обеспечивать формирование стандартных отчетов по продажам и запасам.
- Отчеты должны иметь единообразное форматирование для удобства восприятия.
- Должна быть предусмотрена возможность фильтрации отчетов по периодам и другим параметрам.

## 4. Ограничения и допущения

### 4.1. Технические ограничения
- Система реализуется как консольное приложение без графического интерфейса.
- Система работает с локальной базой данных SQLite, не предусмотрено многопользовательское использование.
- Системные требования: поддержка C++17, наличие библиотеки SQLite3.

### 4.2. Бизнес-ограничения
- Система ориентирована на малые предприятия с ограниченным ассортиментом товаров.
- Не предусмотрен учет денежных операций и формирование финансовой отчетности.
- Не предусмотрен учет клиентов и программы лояльности.

### 4.3. Допущения
- Предполагается, что система будет использоваться в одном физическом магазине без филиалов.
- Предполагается, что пользователи имеют базовые навыки работы с компьютером.
- Предполагается, что объем данных будет расти линейно и не превысит расчетных значений в течение срока эксплуатации системы.
